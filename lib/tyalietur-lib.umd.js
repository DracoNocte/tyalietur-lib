(function(s,a){typeof exports=="object"&&typeof module<"u"?a(exports):typeof define=="function"&&define.amd?define(["exports"],a):(s=typeof globalThis<"u"?globalThis:s||self,a(s["tyalietur-lib"]={}))})(this,function(s){"use strict";var _=(s,a,n)=>{if(!a.has(s))throw TypeError("Cannot "+n)};var i=(s,a,n)=>(_(s,a,"read from private field"),n?n.call(s):a.get(s)),m=(s,a,n)=>{if(a.has(s))throw TypeError("Cannot add the same private member more than once");a instanceof WeakSet?a.add(s):a.set(s,n)},u=(s,a,n,c)=>(_(s,a,"write to private field"),c?c.call(s,n):a.set(s,n),n);var S=(s,a,n)=>(_(s,a,"access private method"),n);var d,T,g,y,N,E,R;var a=(e=>(e.Money="money",e.Wood="wood",e.Stone="stone",e.Minerals="minerals",e.Food="food",e.Textile="textile",e.Spices="spices",e.Commodities="commodities",e))(a||{}),n=(e=>(e.Beggar="beggar",e.Commoner="commoner",e.Burgher="burgher",e.Noble="noble",e.Royal="royal",e.Imperial="imperial",e))(n||{}),c=(e=>(e.Player="player",e.NonPlayer="non-player",e.Background="background",e))(c||{}),O=(e=>(e.Male="male",e.Female="female",e.Hermaphrodite="hermaphrodite",e))(O||{}),p=(e=>(e.None="none",e.Scarce="scarce",e.Mean="mean",e.Common="common",e))(p||{}),Y=(e=>(e.Impossible="impossible",e.Hard="hard",e.Normal="normal",e.Easy="easy",e))(Y||{}),v=(e=>(e.Parent="parent",e.Influence="influence",e))(v||{}),C=(e=>(e.Novice="novice",e.Intermediate="intermediate",e.Advanced="advanced",e.Expert="expert",e.Master="master",e))(C||{}),L=(e=>(e.Easy="easy",e.Normal="normal",e.Hard="hard",e.Extreme="extreme",e))(L||{}),r=(e=>(e.DaysBeforeDays="daysBeforeDays",e.YearsOfTheLamps="yearsOfTheLamps",e.YearsOfTheTrees="yearsOfTheTrees",e.FirstAge="firstAge",e.SecondAge="secondAge",e.ThirdAge="thirdAge",e))(r||{}),o=(e=>(e.Coded="coded",e.CodedAlt="coded-alternate",e.Dotted="dotted",e.DottedAlt="dotted-alternate",e.Short="short",e.Full="full",e))(o||{});const b=/^(?<age1>A\.?(?:[ACL])\.?|[1-9PST]\.?A\.?)[ \t\-_:]?(?<year1>\d+)|(?<year2>\d+)[ \t\-_:](?<age2>A\.?(?:[ACL])\.?|[1-9PST]\.?A\.?)$/i,D=9.582,h={[r.ThirdAge]:291484,[r.SecondAge]:288043,[r.FirstAge]:287460,[r.YearsOfTheTrees]:95820,[r.YearsOfTheLamps]:47910,[r.DaysBeforeDays]:0},I={[o.Full]:{[r.ThirdAge]:"Troisième Âge",[r.SecondAge]:"Deuxième Âge",[r.FirstAge]:"Premier Âge",[r.YearsOfTheTrees]:"Années des Arbres",[r.YearsOfTheLamps]:"Années des Lampes",[r.DaysBeforeDays]:"Années de la Création"},[o.Short]:{[r.ThirdAge]:"3ème Âge",[r.SecondAge]:"2ème Âge",[r.FirstAge]:"1er Âge",[r.YearsOfTheTrees]:"Âge des Arbres",[r.YearsOfTheLamps]:"Âge des Lampes",[r.DaysBeforeDays]:"Âge de la Création"},[o.Dotted]:{[r.ThirdAge]:"T.A.",[r.SecondAge]:"S.A.",[r.FirstAge]:"P.A.",[r.YearsOfTheTrees]:"A.A.",[r.YearsOfTheLamps]:"A.L.",[r.DaysBeforeDays]:"A.C."},[o.DottedAlt]:{[r.ThirdAge]:"3.A.",[r.SecondAge]:"2.A.",[r.FirstAge]:"1.A.",[r.YearsOfTheTrees]:"A.A.",[r.YearsOfTheLamps]:"A.L.",[r.DaysBeforeDays]:"A.C."},[o.Coded]:{[r.ThirdAge]:"TA",[r.SecondAge]:"SA",[r.FirstAge]:"PA",[r.YearsOfTheTrees]:"AA",[r.YearsOfTheLamps]:"AL",[r.DaysBeforeDays]:"AC"},[o.CodedAlt]:{[r.ThirdAge]:"3A",[r.SecondAge]:"2A",[r.FirstAge]:"1A",[r.YearsOfTheTrees]:"AA",[r.YearsOfTheLamps]:"AL",[r.DaysBeforeDays]:"AC"}},B={TA:r.ThirdAge,SA:r.SecondAge,PA:r.FirstAge,"3A":r.ThirdAge,"2A":r.SecondAge,"1A":r.FirstAge,AA:r.YearsOfTheTrees,AL:r.YearsOfTheLamps,AC:r.DaysBeforeDays};class F{constructor(t){m(this,y);m(this,E);m(this,d,void 0);m(this,T,void 0);m(this,g,!1);this.setTime(t)}get isEarlyAge(){return i(this,d)<h[r.FirstAge]}setTime(t){switch(typeof t){case"number":u(this,d,Math.max(0,t));break;case"string":u(this,d,t.match(/^\d+$/)?parseInt(t):S(this,y,N).call(this,t));break;default:throw new Error("Invalid time resolvable")}for(const[A,l]of Object.entries(h))if(i(this,d)>=l){u(this,T,A);break}}getTime(){return i(this,d)}toYear(){return this.isEarlyAge?Math.round((i(this,d)-h[i(this,T)])/D):i(this,d)-h[i(this,T)]}toAge(t=o.Coded){return I[t][i(this,T)]}toString(t=o.Coded){let A;const l=this.isEarlyAge,f=this.toAge(t);return A=`${this.toYear()}`,t===o.Full?A+=` ${l?"des":"du"} ${f}`:t===o.Short?A+=` ${l?"de l'":"du "}${f}`:A+=` ${f}`}hasError(){return i(this,g)}}d=new WeakMap,T=new WeakMap,g=new WeakMap,y=new WeakSet,N=function(t){const A=t.match(b);if(A&&A.groups){const l=(A.groups.age1||A.groups.age2).replaceAll(".",""),f=B[l],M=parseInt(A.groups.year1||A.groups.year2);return u(this,g,!1),S(this,E,R).call(this,f,M)}throw u(this,g,!0),new Error("Invalid date string")},E=new WeakSet,R=function(t,A){switch(t){case r.DaysBeforeDays:case r.YearsOfTheLamps:case r.YearsOfTheTrees:return A*D+h[t];case r.FirstAge:case r.SecondAge:case r.ThirdAge:return A+h[t];default:throw new Error("Invalid age")}},s.ARDA_DATE_AGE_BASE_TIME=h,s.ARDA_DATE_AGE_FROM_CODE=B,s.ARDA_DATE_AGE_STRINGS=I,s.ARDA_DATE_STRING_PATTERN=b,s.ArdaDate=F,s.Asset=a,s.CharacterType=c,s.Difficulty=L,s.Gender=O,s.LearningDifficulty=Y,s.LinkType=v,s.Proficiency=C,s.SocialRank=n,s.UsageRarity=p,s.VALIAN_YEAR_DURATION=D,Object.defineProperty(s,Symbol.toStringTag,{value:"Module"})});
